format_version: 1.1.0
default_step_lib_source: https://github.com/bitrise-io/bitrise-steplib.git

app:
  envs:
  # define these in your .bitrise.secrets.yml
  - IPA_PATH: $IPA_PATH
  - DSYM_PATH: $DSYM_PATH
  - API_TOKEN: $API_TOKEN
  - APP_ID: $APP_ID
  - NOTES: $NOTES
  - NOTES_TYPE: $NOTES_TYPE
  - NOTIFY: $NOTIFY
  - STATUS: $STATUS
  - MANDATORY: $MANDATORY
  - TAGS: $TAGS
  - COMMIT_SHA: $COMMIT_SHA
  - BUILD_SERVER_URL: $BUILD_SERVER_URL
  - REPOSITORY_URL: $REPOSITORY_URL

workflows:
  test:
    steps:
    - change-workdir:
        run_if: true
        inputs:
        - path: ./_tmp
        - is_create_path: true
    - path::./:
        inputs:
        - ipa_path: "${IPA_PATH}"
        - dsym_path: "${DSYM_PATH}"
        - api_token: "${API_TOKEN}"
        - app_id: "${APP_ID}"
        - notes: "${NOTES}"
        - notes_type: "${NOTES_TYPE}"
        - notify: "${NOTIFY}"
        - status: "${STATUS}"
        - mandatory: "${MANDATORY}"
        - tags: "${TAGS}"
        - commit_sha: "${COMMIT_SHA}"
        - build_server_url: "${BUILD_SERVER_URL}"
        - repository_url: "${REPOSITORY_URL}"
    - script:
        title: Output (generated by the Step) tests
        inputs:
        - content: |-
            #!/bin/bash
            echo "HOCKEYAPP_DEPLOY_STATUS: ${HOCKEYAPP_DEPLOY_STATUS}"
            echo "HOCKEYAPP_DEPLOY_PUBLIC_URL: ${HOCKEYAPP_DEPLOY_PUBLIC_URL}"
            echo "HOCKEYAPP_DEPLOY_BUILD_URL: ${HOCKEYAPP_DEPLOY_BUILD_URL}"
            echo "HOCKEYAPP_DEPLOY_CONFIG_URL: ${HOCKEYAPP_DEPLOY_CONFIG_URL}"
